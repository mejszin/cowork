<!DOCTYPE html>
<html>

<head>
    <title>Placeholder</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <link rel="stylesheet" type="text/css" href="./css/bulma.css" />
    <link rel="stylesheet" type="text/css" href="./css/bulma-divider.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="./lib/authenticate.js"></script>
    <script src="./lib/api.js"></script>
    <script src="./lib/render.js"></script>
    <script src="./lib/state.js"></script>
</head>

<style>
    #chat-button-text,#todo-button-text,#gallery-button-text {
        font-size: 0.7em;
    }
</style>

<body>
    <div class="columns is-centered m-0 p-0">
        <div class="column is-one-third p-0">
            <div id="vertical-grid">
                <div id="header" class="p-4">
                    <div class="tabs is-toggle">
                        <ul>
                            <li id="chat-button" class="is-active">
                                <a onclick="changeState('chat')">
                                    <span class="icon is-small"><i class="fas fa-bars-staggered" aria-hidden="true"></i></span>
                                    <span id="chat-button-text"></span>
                                </a>
                            </li>
                            <li id="todo-button">
                                <a onclick="changeState('todo')">
                                    <span class="icon is-small"><i class="fas fa-list-check" aria-hidden="true"></i></span>
                                    <span id="todo-button-text"></span>
                                </a>
                            </li>
                            <li id="gallery-button">
                                <a onclick="changeState('gallery')">
                                    <span class="icon is-small"><i class="fas fa-images" aria-hidden="true"></i></span>
                                    <span id="gallery-button-text"></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="card-list"></div>
                <div id="footer" class="p-4">
                    <textarea class="textarea" rows="1"></textarea>
                </div>
            </div>
        </div>
    </div>
    <script>
        changeState('chat');
        async function renderProjectItems() {
            getProjectItems(project_id).then(items => {
                Object.keys(items).forEach(id => {
                    console.log(items[id]);
                    renderTextCard(items[id].props, items[id].author.id == user_id);
                    var card_list = document.getElementById('card-list');
                    card_list.scrollTop = card_list.scrollHeight;
                });
            });
        }
        assertToken(
            null,
            () => {
                assertProject(
                    null,
                    () => {
                        renderProjectItems();
                    },
                    () => console.log('Project ID error')
                )
            },
            () => console.log('Token error')
        );
    </script>
</body>

</html>